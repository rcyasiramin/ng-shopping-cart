"use strict";(self.webpackChunkng_shopping_cart=self.webpackChunkng_shopping_cart||[]).push([["src_app_features_cart_cart_module_ts"],{4259:(O,C,n)=>{n.r(C),n.d(C,{CartModule:()=>P});var t=n(9575),h=n(9706),e=(n(6310),n(2560)),l=n(1527);class p{constructor(i,a,M,v){this.cartService=i,this.authService=a,this.router=M,this.alert=v}canDeactivate(i,a,M,v){return!(!v.url.includes("/cart")&&!v.url.includes("/login"))||!(this.cartService.getCartProducts().length>0)||this.alert.createBooleanConfirmDialog("Are you sure you want to leave your cart?","")}checkLogin(i){if(this.authService.isLoggedIn()){const a=this.cartService.getCartProducts().length>0;return a||(this.alert.createWarningDialog("You don't have products in your cart","Add some items first"),this.router.navigate(["/"])),a}return this.router.navigate(["/login"],{queryParams:{from:i}}),!1}canActivate(i,a){return a.url.includes("confirmation")?this.cartService.hasCheckedOut()?this.checkLogin(a.url):(this.router.navigate(["/cart"]),!1):this.checkLogin(a.url)}}p.\u0275fac=function(i){return new(i||p)(e.LFG(l.Ni),e.LFG(l.e8),e.LFG(h.F0),e.LFG(l.c9))},p.\u0275prov=e.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"});var s=n(4666);function f(c,i){if(1&c&&(e.ynx(0),e.TgZ(1,"div",2)(2,"div",3)(3,"span"),e._uU(4),e.qZA()(),e.TgZ(5,"span"),e._uU(6),e.qZA()(),e.BQk()),2&c){const a=i.$implicit;e.xp6(2),e.ekj("completed",a.completed)("current",a.current),e.xp6(2),e.Oqu(a.step.toString()),e.xp6(2),e.hij(" ",a.title," ")}}class m{constructor(i){this.cartService=i,this.steps=[]}ngOnInit(){this.steps=this.cartService.getSteps()}}m.\u0275fac=function(i){return new(i||m)(e.Y36(l.Ni))},m.\u0275cmp=e.Xpm({type:m,selectors:[["order-line"]],decls:2,vars:1,consts:[[1,"order-line"],[4,"ngFor","ngForOf"],[1,"step-column"],[1,"step"]],template:function(i,a){1&i&&(e.TgZ(0,"div",0),e.YNc(1,f,7,6,"ng-container",1),e.qZA()),2&i&&(e.xp6(1),e.Q6J("ngForOf",a.steps))},dependencies:[s.sg],styles:[".order-line[_ngcontent-%COMP%]{width:100%;height:45px;display:flex;flex-direction:row;align-items:center;justify-content:space-evenly}.order-line[_ngcontent-%COMP%]   .step-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}.order-line[_ngcontent-%COMP%]   .step-column[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]{border-radius:50%;background-color:gray;width:1.5rem;height:1.5rem;display:flex;align-items:center;justify-content:center}.order-line[_ngcontent-%COMP%]   .step-column[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff}.order-line[_ngcontent-%COMP%]   .step-column[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]{background-color:#ffba39!important}.order-line[_ngcontent-%COMP%]   .step-column[_ngcontent-%COMP%]   .completed[_ngcontent-%COMP%]{background-color:#0dcc0d!important}"]});class d{constructor(i,a){this.cartService=i,this.router=a}ngOnInit(){this.cartService.setAtCart(this.router.url)}}d.\u0275fac=function(i){return new(i||d)(e.Y36(l.Ni),e.Y36(h.F0))},d.\u0275cmp=e.Xpm({type:d,selectors:[["ng-component"]],decls:3,vars:0,consts:[[1,"cart-container"]],template:function(i,a){1&i&&(e._UZ(0,"order-line"),e.TgZ(1,"div",0),e._UZ(2,"router-outlet"),e.qZA())},dependencies:[h.lC,m],styles:[".cart-container[_ngcontent-%COMP%]{background-color:#fff;position:relative;padding:20px 30px 25px;height:calc(100vh - 186px);display:flex;flex-direction:column;align-items:stretch}"]});const r=[{path:"",component:d,canDeactivate:[p],children:[{path:"",pathMatch:"full",redirectTo:"resume"},{path:"resume",loadChildren:()=>n.e("src_app_features_cart_pages_resume_resume_module_ts").then(n.bind(n,4596)).then(c=>c.ResumeModule),title:"Cart Resume | BC Store"},{path:"checkout",loadChildren:()=>n.e("src_app_features_cart_pages_checkout_checkout_module_ts").then(n.bind(n,7451)).then(c=>c.CheckoutModule),title:"Cart Checkout | BC Store",canActivate:[p]},{path:"confirmation",loadChildren:()=>n.e("src_app_features_cart_pages_confirmation_confirmation_module_ts").then(n.bind(n,9974)).then(c=>c.ConfirmationModule),title:"Order Confirmation | BC Store",canActivate:[p]}]}];class o{}o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[h.Bz.forChild(r),h.Bz]}),n(2876),n(9232),n(4338);class P{}P.\u0275fac=function(i){return new(i||P)},P.\u0275mod=e.oAB({type:P}),P.\u0275inj=e.cJS({imports:[t.m,o]})},4338:(O,C,n)=>{n.d(C,{L:()=>r});var t=n(2560),h=n(6008),_=n(2508),e=n(4666),l=n(7822),p=n(4522),s=n(1267),f=n(5074);function m(o,g){if(1&o){const u=t.EpF();t.TgZ(0,"button",6),t.NdJ("click",function(){t.CHM(u);const P=t.oxw();return t.KtG(P.applyCoupon())}),t.TgZ(1,"mat-icon"),t._uU(2,"check"),t.qZA()()}}function d(o,g){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Invalid Coupon "),t.qZA())}class r{constructor(g){this.fb=g,this.onDiscountPercentage=new t.vpe,this.discountPercentage=0}ngOnInit(){this.discountForm=this.fb.group({coupon:""})}validateCoupon(g){return""===g||h.rs.map(u=>u.name).includes(g)}applyCoupon(){const u=this.discountForm.getRawValue().coupon;this.validateCoupon(u)?this.discountPercentage=h.rs.find(y=>y.name===u)?.discountPercentage??0:this.discountForm.controls.coupon.setErrors({invalidCoupon:!0}),this.onDiscountPercentage.emit(this.discountForm.valid?this.discountPercentage:0)}}r.\u0275fac=function(g){return new(g||r)(t.Y36(_.qu))},r.\u0275cmp=t.Xpm({type:r,selectors:[["discount-field"]],outputs:{onDiscountPercentage:"onDiscountPercentage"},decls:9,vars:3,consts:[["role","form",3,"formGroup"],[1,"discount-container"],[1,"coupon-field"],["matInput","","placeholder","Enter your coupon","formControlName","coupon"],["matSuffix","","mat-icon-button","",3,"click",4,"ngIf"],[4,"ngIf"],["matSuffix","","mat-icon-button","",3,"click"]],template:function(g,u){if(1&g&&(t.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"mat-form-field")(4,"mat-label"),t._uU(5,"DISCOUNT COUPON"),t.qZA(),t._UZ(6,"input",3),t.YNc(7,m,3,0,"button",4),t.YNc(8,d,2,0,"mat-error",5),t.qZA()()()()),2&g){let y;t.Q6J("formGroup",u.discountForm),t.xp6(7),t.Q6J("ngIf",u.discountForm.valid&&""!==(null==(y=u.discountForm.get("coupon"))?null:y.value)),t.xp6(1),t.Q6J("ngIf",u.discountForm.controls.coupon.hasError("invalidCoupon"))}},dependencies:[e.O5,l.Hw,p.RK,s.Nt,f.KE,f.hX,f.TO,f.R9,_._Y,_.Fj,_.JJ,_.JL,_.sg,_.u],styles:[".discount-container{display:flex;flex-direction:row;justify-content:space-between;align-items:center}  .discount-container .coupon-field .mat-mdc-form-field{width:100%;height:5rem}  .discount-container .coupon-field{width:300px}"]})},2876:(O,C,n)=>{n.d(C,{x:()=>m});var t=n(2560),h=n(1527),_=n(4666),e=n(7822),l=n(4522),p=n(9232);function s(d,r){if(1&d){const o=t.EpF();t.TgZ(0,"div",6)(1,"span",7),t._uU(2),t.qZA(),t.TgZ(3,"quantity-changer",8),t.NdJ("onQuantityChange",function(u){t.CHM(o);const y=t.oxw();return t.KtG(y.changeQuantity(u.quantity,u.action))}),t.qZA(),t.TgZ(4,"button",9),t.NdJ("click",function(){t.CHM(o);const u=t.oxw();return t.KtG(u.removeProduct())}),t.TgZ(5,"mat-icon"),t._uU(6,"delete"),t.qZA()()()}if(2&d){const o=t.oxw();t.xp6(2),t.hij(" $",o.getPrice()," "),t.xp6(1),t.Q6J("quantity",o.product.quantity)("maxQuantity",o.maxQuantity)}}function f(d,r){if(1&d&&(t.TgZ(0,"div",6)(1,"span",7),t._uU(2),t.ALo(3,"currency"),t.qZA(),t.TgZ(4,"span",10),t._uU(5),t.qZA()()),2&d){const o=t.oxw();t.xp6(2),t.hij(" ",t.Dn7(3,2,o.getPrice(),"USD","symbol")," "),t.xp6(3),t.hij("Quantity: ",o.product.quantity,"")}}class m{constructor(r,o){this.cartService=r,this.productService=o,this.position=0,this.quantity=0,this.hasActions=!0,this.onChangeQuantity=new t.vpe,this.onRemoveProduct=new t.vpe,this.maxQuantity=0}ngOnInit(){this.productService.getProducts().then(r=>{this.maxQuantity=(r.find(o=>o.id===this.product.id)?.stock??0)+this.quantity})}getPrice(){return this.product.price*this.quantity}changeQuantity(r,o){"add"===o?this.cartService.addProductToCart(this.product):this.cartService.removeProductFromCart(this.product.id),this.quantity=r,this.onChangeQuantity.emit("")}removeProduct(){this.cartService.removeProductFromCart(this.product.id,0===this.quantity?1:this.quantity),this.onRemoveProduct.emit("")}}m.\u0275fac=function(r){return new(r||m)(t.Y36(h.Ni),t.Y36(h.su))},m.\u0275cmp=t.Xpm({type:m,selectors:[["product-tile"]],inputs:{product:"product",position:"position",quantity:"quantity",hasActions:"hasActions"},outputs:{onChangeQuantity:"onChangeQuantity",onRemoveProduct:"onRemoveProduct"},decls:9,vars:5,consts:[[1,"product-card","mat-elevation-z3"],[1,"left"],[1,"product-position"],["loading","lazy",3,"src"],[1,"product-name"],["class","right",4,"ngIf"],[1,"right"],[1,"price"],[3,"quantity","maxQuantity","onQuantityChange"],["mat-icon-button","",1,"delete",3,"click"],[1,"quantity"]],template:function(r,o){1&r&&(t.TgZ(0,"div",0)(1,"div",1)(2,"span",2),t._uU(3),t.qZA(),t._UZ(4,"img",3),t.TgZ(5,"span",4),t._uU(6),t.qZA()(),t.YNc(7,s,7,3,"div",5),t.YNc(8,f,6,6,"div",5),t.qZA()),2&r&&(t.xp6(3),t.Oqu(o.position),t.xp6(1),t.Q6J("src",o.product.image,t.LSH),t.xp6(2),t.hij(" ",o.product.title," "),t.xp6(1),t.Q6J("ngIf",o.hasActions),t.xp6(1),t.Q6J("ngIf",!o.hasActions))},dependencies:[_.O5,e.Hw,l.RK,p.B,_.H9],styles:[".product-card[_ngcontent-%COMP%]{background-color:#ebebeb;border-radius:10px;width:100%;height:5rem;display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding:0 1rem}.product-card[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%], .product-card[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:inherit;gap:10px}.product-card[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{max-width:45%}.product-card[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   span.product-position[_ngcontent-%COMP%]{font-weight:700;font-size:.9rem}.product-card[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:contain;height:70px}.product-card[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   span.product-name[_ngcontent-%COMP%]{font-size:1rem}.product-card[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{max-width:50%}.product-card[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   span.price[_ngcontent-%COMP%]{font-weight:700;font-size:1rem}.product-card[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   span.quantity[_ngcontent-%COMP%]{font-size:1rem}"]})},9232:(O,C,n)=>{n.d(C,{B:()=>l});var t=n(2560),h=n(1527),_=n(7822),e=n(4522);class l{constructor(s){this.alert=s,this.quantity=0,this.maxQuantity=0,this.onQuantityChange=new t.vpe}changeQuantity(s){this.quantity!==this.maxQuantity||"add"!==s?(this.quantity="add"===s?this.quantity+1:this.quantity-1,this.onQuantityChange.emit({quantity:this.quantity,action:s})):this.alert.createWarningDialog("Can't add more",`Only ${this.maxQuantity} left!`)}}l.\u0275fac=function(s){return new(s||l)(t.Y36(h.c9))},l.\u0275cmp=t.Xpm({type:l,selectors:[["quantity-changer"]],inputs:{quantity:"quantity",maxQuantity:"maxQuantity"},outputs:{onQuantityChange:"onQuantityChange"},decls:9,vars:1,consts:[[1,"container"],["mat-icon-button","",3,"click"],[1,"quantity"]],template:function(s,f){1&s&&(t.TgZ(0,"div",0)(1,"button",1),t.NdJ("click",function(){return f.changeQuantity("remove")}),t.TgZ(2,"mat-icon"),t._uU(3,"remove"),t.qZA()(),t.TgZ(4,"span",2),t._uU(5),t.qZA(),t.TgZ(6,"button",1),t.NdJ("click",function(){return f.changeQuantity("add")}),t.TgZ(7,"mat-icon"),t._uU(8,"add"),t.qZA()()()),2&s&&(t.xp6(5),t.Oqu(f.quantity))},dependencies:[_.Hw,e.RK],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:.5rem}.container[_ngcontent-%COMP%]   span.quantity[_ngcontent-%COMP%]{font-size:1rem;font-weight:600}"]})}}]);