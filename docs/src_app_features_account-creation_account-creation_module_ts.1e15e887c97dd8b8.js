"use strict";(self.webpackChunkng_shopping_cart=self.webpackChunkng_shopping_cart||[]).push([["src_app_features_account-creation_account-creation_module_ts"],{9606:(te,Z,a)=>{a.r(Z),a.d(Z,{AccountCreationModule:()=>m});var g=a(9706),A=a(1670),n=a(2508),w=a(6008),C=a(4101),e=a(2560),p=a(1527),q=a(3902),y=a(4666),U=a(7822),_=a(4522),v=a(1267),d=a(5074),x=a(7371),N=a(207),b=a(4792),T=a(446);function I(o,t){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Name is "),e.TgZ(2,"strong"),e._uU(3,"required"),e.qZA()())}function F(o,t){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Last name is "),e.TgZ(2,"strong"),e._uU(3,"required"),e.qZA()())}function P(o,t){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Phone is "),e.TgZ(2,"strong"),e._uU(3,"required"),e.qZA()())}function E(o,t){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Please enter a valid email address "),e.qZA())}function J(o,t){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Email is "),e.TgZ(2,"strong"),e._uU(3,"required"),e.qZA()())}function Y(o,t){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," ZIP Code is "),e.TgZ(2,"strong"),e._uU(3,"required"),e.qZA()())}function Q(o,t){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Please enter a valid ZIP Code "),e.qZA())}function S(o,t){if(1&o&&(e.TgZ(0,"mat-option",40),e._uU(1),e.qZA()),2&o){const r=t.$implicit;e.Q6J("value",r.uf),e.xp6(1),e.hij(" ",r.name," ")}}function k(o,t){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," State is "),e.TgZ(2,"strong"),e._uU(3,"required"),e.qZA()())}function j(o,t){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Street is "),e.TgZ(2,"strong"),e._uU(3,"required"),e.qZA()())}function z(o,t){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," City name is "),e.TgZ(2,"strong"),e._uU(3,"required"),e.qZA()())}function V(o,t){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Neighborhood is "),e.TgZ(2,"strong"),e._uU(3,"required"),e.qZA()())}function G(o,t){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Password is "),e.TgZ(2,"strong"),e._uU(3,"required"),e.qZA()())}function O(o,t){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Password is "),e.TgZ(2,"strong"),e._uU(3,"incorrect"),e.qZA()())}function R(o,t){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Password is "),e.TgZ(2,"strong"),e._uU(3,"required"),e.qZA()())}function B(o,t){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Passwords are "),e.TgZ(2,"strong"),e._uU(3,"differents"),e.qZA()())}class u{constructor(t,r,i,f,s,h){this.fb=t,this.authService=r,this.utils=i,this.router=f,this.alert=s,this.spinner=h,this.showPassword=[!1,!1],this.stateOpts=[]}ngOnInit(){this.stateOpts=Object.keys(C.G).map(t=>({uf:t,name:C.G[t].name})),this.newAccountForm=this.fb.group({name:["",[n.kI.required]],lastName:["",[n.kI.required]],email:["",[n.kI.required,n.kI.email]],phone:["",[n.kI.required]],address:this.fb.group({zipCode:["",[n.kI.required]],street:["",[n.kI.required]],complement:[""],neighborhood:["",[n.kI.required]],city:["",[n.kI.required]],state:["",[n.kI.required]]}),password:["",[n.kI.required]],confirmPassword:["",[n.kI.required]],privacyPolicy:[!1,[n.kI.required]],dataSharing:[!1,[n.kI.required]]})}getAddressFromZipCode(t){var r=this;return(0,A.Z)(function*(){""===t.trim()&&r.newAccountForm.controls.address.get("zipCode")?.setErrors({required:!0});try{t=t.replace("-","").trim();const i=yield r.utils.getDataFromZipCode(t);r.fillAddress(i)}catch{r.newAccountForm.controls.address.get("zipCode")?.setErrors({invalidZipCode:!0})}})()}agreementAccepted(){const t=this.newAccountForm.getRawValue();return t.privacyPolicy&&t.dataSharing}fillAddress(t){const r=this.newAccountForm.controls.address;r.get("city")?.setValue(t.cidade),r.get("state")?.setValue(t.estado),r.get("neighborhood")?.setValue(t.bairro),r.get("street")?.setValue(t.logradouro)}getNewUser(){const t=this.newAccountForm.getRawValue(),r=t.email,i=r.split("@")[0],f=t.password,s=t.name,h=t.lastName,M=t.phone,l=this.newAccountForm.controls.address.getRawValue();return{id:w.nb.length+1,email:r,firstName:s,maidenName:"",lastName:h,password:f,username:i,addresses:[{city:l.city,postalCode:l.zipCode,state:l.state,address:`${l.street} - ${l.complement} - ${l.neighborhood}`}],phone:M}}createAccount(){var t=this;return(0,A.Z)(function*(){t.spinner.show();const r=t.getNewUser();if(w.nb.find(s=>s.email===r.email||s.username===r.username))return t.alert.createErrorDialog("Account already exists","An account with this email already exists"),void t.spinner.hide();const f=t.newAccountForm.getRawValue().confirmPassword;if(r.password!==f)return t.newAccountForm.controls.confirmPassword.setErrors({differentPassword:!0}),void t.spinner.hide();try{t.newAccountForm.valid&&(yield t.authService.createNewAccount(r),t.alert.createSuccessDialogWithAction("Account created!","Your account was created successfully",()=>{t.router.navigate(["/login"])}))}catch{t.alert.createErrorDialog("Error!","Something went wrong")}finally{t.spinner.hide()}})()}}u.\u0275fac=function(t){return new(t||u)(e.Y36(n.qu),e.Y36(p.e8),e.Y36(p.FW),e.Y36(g.F0),e.Y36(p.c9),e.Y36(q.o))},u.\u0275cmp=e.Xpm({type:u,selectors:[["ng-component"]],decls:101,vars:22,consts:[["role","form",1,"creation-form",3,"formGroup","ngSubmit"],[1,"login-container"],["routerLink","/","title","Back to Store",1,"logo"],["loading","lazy","src","assets/images/shopping-cart-logo.png","width","60","height","60"],[1,"fields"],[1,"row"],["id","name-field"],["type","text","matInput","","formControlName","name","placeholder","Enter your name"],[4,"ngIf"],["id","lastname-field"],["type","text","matInput","","formControlName","lastName","placeholder","Enter your last name"],["id","phone-field"],["matTextPrefix",""],["type","tel","matInput","","formControlName","phone","placeholder","Enter your phone","mask","(00) 00000-0000||(00) 0000-0000"],["id","email-field"],["type","email","matInput","","formControlName","email","placeholder","Enter your email"],["formGroupName","address",1,"address"],["id","zipCode-field"],["type","text","matInput","","formControlName","zipCode","placeholder","Enter your ZIP Code","mask","00000-000"],["matSuffix","","mat-icon-button","","type","button",3,"click"],["id","state-field"],["formControlName","state"],[3,"value",4,"ngFor","ngForOf"],["id","street-field"],["type","text","matInput","","formControlName","street","placeholder","Enter your street"],["id","complement-field"],["type","text","matInput","","formControlName","complement","placeholder","Enter your complement"],["id","city-field"],["type","text","matInput","","formControlName","city","placeholder","Enter your city"],["id","neighborhood-field"],["type","text","matInput","","formControlName","neighborhood","placeholder","Enter your neighborhood"],["id","password-field"],["matInput","","formControlName","password","placeholder","Enter your password",3,"type"],["id","confirm-password-field"],["matInput","","formControlName","confirmPassword","placeholder","Confirm your password",3,"type"],[1,"agreements"],["formControlName","privacyPolicy","color","primary"],["formControlName","dataSharing","color","primary"],["href","https://www.planalto.gov.br/ccivil_03/_ato2015-2018/2018/lei/l13709.htm","target","_blank"],["mat-flat-button","","color","primary","id","submit-btn","type","submit",3,"disabled"],[3,"value"]],template:function(t,r){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return r.createAccount()}),e.TgZ(1,"div",1)(2,"div",2),e._UZ(3,"img",3),e.TgZ(4,"span"),e._uU(5,"BC Store"),e.qZA()(),e.TgZ(6,"div",4)(7,"div",5)(8,"mat-form-field",6)(9,"mat-label"),e._uU(10,"Name"),e.qZA(),e._UZ(11,"input",7),e.YNc(12,I,4,0,"mat-error",8),e.qZA(),e.TgZ(13,"mat-form-field",9)(14,"mat-label"),e._uU(15,"Last Name"),e.qZA(),e._UZ(16,"input",10),e.YNc(17,F,4,0,"mat-error",8),e.qZA()(),e.TgZ(18,"mat-form-field",11)(19,"mat-label"),e._uU(20,"Phone"),e.qZA(),e.TgZ(21,"span",12),e._uU(22,"+55"),e.qZA(),e._UZ(23,"input",13),e.YNc(24,P,4,0,"mat-error",8),e.qZA(),e.TgZ(25,"mat-form-field",14)(26,"mat-label"),e._uU(27,"Email"),e.qZA(),e._UZ(28,"input",15),e.YNc(29,E,2,0,"mat-error",8),e.YNc(30,J,4,0,"mat-error",8),e.qZA(),e.TgZ(31,"div",16)(32,"h2"),e._uU(33,"Adress"),e.qZA(),e.TgZ(34,"div",5)(35,"mat-form-field",17)(36,"mat-label"),e._uU(37,"ZIP Code"),e.qZA(),e._UZ(38,"input",18),e.TgZ(39,"button",19),e.NdJ("click",function(){return r.getAddressFromZipCode(r.newAccountForm.get("address").get("zipCode").value)}),e.TgZ(40,"mat-icon"),e._uU(41," search "),e.qZA()(),e.YNc(42,Y,4,0,"mat-error",8),e.YNc(43,Q,2,0,"mat-error",8),e.qZA(),e.TgZ(44,"mat-form-field",20)(45,"mat-label"),e._uU(46,"State"),e.qZA(),e.TgZ(47,"mat-select",21),e.YNc(48,S,2,2,"mat-option",22),e.qZA(),e.YNc(49,k,4,0,"mat-error",8),e.qZA()(),e.TgZ(50,"div",5)(51,"mat-form-field",23)(52,"mat-label"),e._uU(53,"Street"),e.qZA(),e._UZ(54,"input",24),e.YNc(55,j,4,0,"mat-error",8),e.qZA(),e.TgZ(56,"mat-form-field",25)(57,"mat-label"),e._uU(58,"Complement"),e.qZA(),e._UZ(59,"input",26),e.qZA()(),e.TgZ(60,"div",5)(61,"mat-form-field",27)(62,"mat-label"),e._uU(63,"City"),e.qZA(),e._UZ(64,"input",28),e.YNc(65,z,4,0,"mat-error",8),e.qZA(),e.TgZ(66,"mat-form-field",29)(67,"mat-label"),e._uU(68,"Neighborhood"),e.qZA(),e._UZ(69,"input",30),e.YNc(70,V,4,0,"mat-error",8),e.qZA()()(),e.TgZ(71,"div",5)(72,"mat-form-field",31)(73,"mat-label"),e._uU(74,"Password"),e.qZA(),e._UZ(75,"input",32),e.TgZ(76,"button",19),e.NdJ("click",function(){return r.showPassword[0]=!r.showPassword[0]}),e.TgZ(77,"mat-icon"),e._uU(78),e.qZA()(),e.YNc(79,G,4,0,"mat-error",8),e.YNc(80,O,4,0,"mat-error",8),e.qZA(),e.TgZ(81,"mat-form-field",33)(82,"mat-label"),e._uU(83,"Confirm Password"),e.qZA(),e._UZ(84,"input",34),e.TgZ(85,"button",19),e.NdJ("click",function(){return r.showPassword[1]=!r.showPassword[1]}),e.TgZ(86,"mat-icon"),e._uU(87),e.qZA()(),e.YNc(88,R,4,0,"mat-error",8),e.YNc(89,B,4,0,"mat-error",8),e.qZA()(),e.TgZ(90,"div",35)(91,"mat-checkbox",36),e._uU(92," Privacy Policy Agreement - "),e.TgZ(93,"a"),e._uU(94,"Click here"),e.qZA()(),e.TgZ(95,"mat-checkbox",37),e._uU(96," I agree with the data sharing policy - "),e.TgZ(97,"a",38),e._uU(98," LGPD document "),e.qZA()()()(),e.TgZ(99,"button",39),e._uU(100," Create Account "),e.qZA()()()),2&t&&(e.Q6J("formGroup",r.newAccountForm),e.xp6(12),e.Q6J("ngIf",r.newAccountForm.get("name").hasError("required")),e.xp6(5),e.Q6J("ngIf",r.newAccountForm.get("lastName").hasError("required")),e.xp6(7),e.Q6J("ngIf",r.newAccountForm.get("phone").hasError("required")),e.xp6(5),e.Q6J("ngIf",r.newAccountForm.get("email").hasError("email")&&!r.newAccountForm.get("email").hasError("required")),e.xp6(1),e.Q6J("ngIf",r.newAccountForm.get("email").hasError("required")),e.xp6(12),e.Q6J("ngIf",r.newAccountForm.get("address").get("zipCode").hasError("required")),e.xp6(1),e.Q6J("ngIf",r.newAccountForm.get("address").get("zipCode").hasError("invalidZipCode")),e.xp6(5),e.Q6J("ngForOf",r.stateOpts),e.xp6(1),e.Q6J("ngIf",r.newAccountForm.get("address").get("state").hasError("required")),e.xp6(6),e.Q6J("ngIf",r.newAccountForm.get("address").get("street").hasError("required")),e.xp6(10),e.Q6J("ngIf",r.newAccountForm.get("address").get("city").hasError("required")),e.xp6(5),e.Q6J("ngIf",r.newAccountForm.get("address").get("neighborhood").hasError("required")),e.xp6(5),e.Q6J("type",r.showPassword[0]?"text":"password"),e.xp6(3),e.hij(" ",r.showPassword[0]?"visibility_off":"visibility"," "),e.xp6(1),e.Q6J("ngIf",r.newAccountForm.get("password").hasError("required")),e.xp6(1),e.Q6J("ngIf",r.newAccountForm.get("password").hasError("incorrectPassword")),e.xp6(4),e.Q6J("type",r.showPassword[1]?"text":"password"),e.xp6(3),e.hij(" ",r.showPassword[1]?"visibility_off":"visibility"," "),e.xp6(1),e.Q6J("ngIf",r.newAccountForm.get("confirmPassword").hasError("required")),e.xp6(1),e.Q6J("ngIf",r.newAccountForm.get("confirmPassword").hasError("differentPassword")),e.xp6(10),e.Q6J("disabled",r.newAccountForm.invalid||!r.agreementAccepted()))},dependencies:[y.sg,y.O5,U.Hw,_.lW,_.RK,v.Nt,d.KE,d.hX,d.TO,d.qo,d.R9,x.gD,N.ey,b.oG,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,n.x0,g.rH,T.Z6],styles:[".creation-form{width:100%;min-height:100vh;display:flex;align-items:center;background-color:gray;padding:50px 0}  .creation-form .login-container{display:flex;flex-direction:column;justify-content:space-evenly;align-items:center;padding:20px 10px;width:80%;margin:auto;background-color:#fff;border-radius:10px}  .creation-form .login-container .logo{display:flex;align-items:center;cursor:pointer}  .creation-form .login-container .logo img{height:5rem;width:5rem;object-fit:contain}  .creation-form .login-container .logo span{font-size:3rem;font-weight:900}  .creation-form .login-container .fields{display:inherit;flex-direction:inherit;width:100%;align-items:inherit;justify-content:center;gap:8px;padding:8px 15px}  .creation-form .login-container .fields .address{display:inherit;flex-direction:inherit;width:100%;align-items:inherit;justify-content:center;gap:8px}  .creation-form .login-container .fields .address h2{align-self:flex-start;margin:0}  .creation-form .login-container .fields .row{display:flex;flex-direction:row;justify-content:space-between;align-items:center;width:100%;gap:20px}  .creation-form .login-container .fields .row mat-form-field{width:50%}  .creation-form .login-container .fields .agreements{display:flex;flex-direction:column;align-self:flex-start;width:100%;margin-bottom:10px}  .creation-form .login-container .fields .agreements a{text-decoration:underline;color:#006ac0}  .creation-form .login-container .fields #phone-field .mat-mdc-form-field-text-prefix{padding-right:10px}  .creation-form .login-container .fields .mat-mdc-form-field{width:100%;height:5rem}  .creation-form .login-container button#submit-btn{width:50%}"]});const D=[{path:"",component:u}];class c{}c.\u0275fac=function(t){return new(t||c)},c.\u0275mod=e.oAB({type:c}),c.\u0275inj=e.cJS({imports:[g.Bz.forChild(D),g.Bz]});var L=a(9575);class m{}m.\u0275fac=function(t){return new(t||m)},m.\u0275mod=e.oAB({type:m}),m.\u0275inj=e.cJS({providers:[(0,T.e$)()],imports:[L.m,c]})}}]);